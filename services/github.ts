export const uploadFileToGitHub = async (token:string, owner:string, repo:string, path:string, content:string, message:string) => { const url = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`; const headers = { 'Authorization': `Bearer ${token}`, 'Accept': 'application/vnd.github+json' }; let sha; try { const res = await fetch(url, { headers }); if(res.ok) { const data = await res.json(); sha = data.sha; } } catch(e){} const body = { message, content: btoa(unescape(encodeURIComponent(content))), sha, branch: 'main' }; const response = await fetch(url, { method: 'PUT', headers: { ...headers, 'Content-Type': 'application/json' }, body: JSON.stringify(body) }); if(!response.ok) throw new Error('Failed'); return true; };